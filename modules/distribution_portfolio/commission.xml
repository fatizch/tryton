<?xml version="1.0"?>
<!-- This file is part of Coog. The COPYRIGHT file at the top level of
this repository contains the full copyright notices and license terms. -->
<tryton>
    <data depends="commission_insurance">
        <!-- Rule access to handle partitioning by portfolio -->
        <!-- ######### Commissions  -->
        <record model="ir.rule.group" id="rule_group_portfolio_commission">
            <field name="name">In the user's portfolios</field>
            <field name="model" search="[('model', '=', 'commission')]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_delete" eval="True"/>
        </record>
        <record model="ir.rule" id="rule_portfolio_commission_1">
            <field name="domain"
                 eval="[[u'portfolio', u'in', Get(Eval(u'user', {}), u'network_portfolios', [])]]" pyson="1"/>
            <field name="rule_group" ref="rule_group_portfolio_commission"/>
        </record>
        <record model="ir.rule" id="rule_portfolio_commission_2">
            <field name="domain" eval="[[u'portfolio', u'=', None]]" pyson="1"/>
            <field name="rule_group" ref="rule_group_portfolio_commission"/>
        </record>
        <!-- ######### Aggregated Commissions  -->
        <record model="ir.rule.group" id="rule_group_portfolio_commission_aggregated">
            <field name="name">In the user's portfolios</field>
            <field name="model" search="[('model', '=', 'commission.aggregated')]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_delete" eval="True"/>
        </record>
        <record model="ir.rule" id="rule_portfolio_commission_aggregated_1">
            <field name="domain"
                 eval="[[u'portfolio', u'in', Get(Eval(u'user', {}), u'network_portfolios', [])]]" pyson="1"/>
            <field name="rule_group" ref="rule_group_portfolio_commission_aggregated"/>
        </record>
        <record model="ir.rule" id="rule_portfolio_commission_aggregated_2">
            <field name="domain" eval="[[u'portfolio', u'=', None]]" pyson="1"/>
            <field name="rule_group" ref="rule_group_portfolio_commission_aggregated"/>
        </record>
    </data>
</tryton>
