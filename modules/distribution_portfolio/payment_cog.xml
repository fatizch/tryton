<?xml version="1.0"?>
<!-- This file is part of Coog. The COPYRIGHT file at the top level of
this repository contains the full copyright notices and license terms. -->
<tryton>
    <data depends="account_payment_cog">
        <!-- Rule access to handle partitioning by portfolio -->
        <!-- ######### Payments  -->
        <record model="ir.rule.group" id="rule_group_portfolio_merged_payment">
            <field name="model" search="[('model', '=', 'account.payment.merged')]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_delete" eval="True"/>
        </record>
        <record model="ir.rule" id="rule_portfolio_merged_payment_1">
            <field name="domain"
                 eval="[[u'portfolio', u'in', Get(Eval(u'user', {}), u'network_portfolios', [])]]" pyson="1"/>
            <field name="rule_group" ref="rule_group_portfolio_merged_payment"/>
        </record>
        <record model="ir.rule" id="rule_portfolio_merged_payment_2">
            <field name="domain" eval="[[u'portfolio', u'=', None]]" pyson="1"/>
            <field name="rule_group" ref="rule_group_portfolio_merged_payment"/>
        </record>
    </data>
</tryton>
