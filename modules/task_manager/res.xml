<?xml version="1.0" encoding="utf-8"?>
<tryton>
    <data>
        <!-- ############################################################ -->
        <!-- Menu Entries -->
        <!-- ############################################################ -->
        <menuitem name="Task Manager" id="menu_task" sequence="-1" icon="task_menu"/>
        <!-- ############################################################ -->
        <!-- User -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="user_view_form">
            <field name="model">res.user</field>
            <field name="type">form</field>
            <field name="inherit" ref="res.user_view_form"/>
            <field name="name">user_form</field>
        </record>
        <!-- ############################################################ -->
        <!-- Priority -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="priority_view_form">
            <field name="model">res.team.priority</field>
            <field name="type">form</field>
            <field name="name">priority_form</field>
        </record>
        <record model="ir.ui.view" id="priority_view_list">
            <field name="model">res.team.priority</field>
            <field name="type">tree</field>
            <field name="name">priority_list</field>
        </record>
        <!-- ############################################################ -->
        <!-- Team -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="team_view_form">
            <field name="model">res.team</field>
            <field name="type">form</field>
            <field name="name">team_form</field>
        </record>
        <record model="ir.ui.view" id="team_view_list">
            <field name="model">res.team</field>
            <field name="type">tree</field>
            <field name="name">team_list</field>
        </record>
        <record model="ir.ui.view" id="team_management_view_form">
            <field name="model">res.team</field>
            <field name="type">form</field>
            <field name="name">team_management_form</field>
        </record>
        <!-- Entry Points -->
        <record model="ir.action.act_window" id="act_team">
            <field name="name">Team</field>
            <field name="res_model">res.team</field>
        </record>
        <record model="ir.action.act_window.view" id="act_team_view1">
            <field name="sequence" eval="16"/>
            <field name="view" ref="team_view_list"/>
            <field name="act_window" ref="act_team"/>
        </record>
        <record model="ir.action.act_window.view" id="act_team_view2">
            <field name="sequence" eval="16"/>
            <field name="view" ref="team_view_form"/>
            <field name="act_window" ref="act_team"/>
        </record>
        <menuitem parent="menu_task" sequence="100" action="act_team" id="menu_team" icon="task"/>
        <record model="ir.action.act_window" id="act_management_team">
            <field name="name">Team Management</field>
            <field name="res_model">res.team</field>
        </record>
        <record model="ir.action.act_window.view" id="act_team_management_view1">
            <field name="sequence" eval="10"/>
            <field name="view" ref="team_view_list"/>
            <field name="act_window" ref="act_management_team"/>
        </record>
        <record model="ir.action.act_window.view" id="act_team_management_view2">
            <field name="sequence" eval="16"/>
            <field name="view" ref="team_management_view_form"/>
            <field name="act_window" ref="act_management_team"/>
        </record>
        <menuitem parent="menu_task" sequence="100" action="act_management_team" id="menu_management_team" icon="task"/>
        <!-- ############################################################ -->
        <!-- Team Graph-->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="tasks_by_process_step_view_graph">
            <field name="model">res.team.priority</field>
            <field name="type">graph</field>
            <field name="domain" eval="[('team', '=', Eval('active_id'))]" pyson="1"/>
            <field name="name">tasks_by_process_step_graph</field>
        </record>
        <record model="ir.ui.view" id="tasks_by_user_view_graph">
            <field name="model">res.user-res.team</field>
            <field name="type">graph</field>
            <field name="domain" eval="[('team', '=', Eval('active_id'))]" pyson="1"/>
            <field name="name">tasks_by_user_graph</field>
        </record>
        <record model="ir.ui.view" id="tasks_by_date_view_graph">
            <field name="model">process.log</field>
            <field name="type">graph</field>
            <field name="name">tasks_by_date_graph</field>
        </record>
        <!-- ############################################################ -->
        <!-- Task Dispatcher -->
        <!-- ############################################################ -->
        <record model="ir.action.wizard" id="act_task_dispatcher">
            <field name="name">New Task</field>
            <field name="wiz_name">task.select</field>
        </record>
        <menuitem parent="menu_task" sequence="100" action="act_task_dispatcher" id="menu_task_dispatcher"/>
        <!-- ############################################################ -->
        <!-- Process Log -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="process_log_launchable_view_list">
            <field name="model">process.log</field>
            <field name="type">tree</field>
            <field name="name">process_log_launchable_list</field>
        </record>
        <!-- Entry Point -->
        <record model="ir.action.act_window" id="act_process_log">
            <field name="name">Waiting Tasks</field>
            <field name="res_model">process.log</field>
            <!-- Temporary disable autoreload to investigate -->
            <!-- issue https://bugs.b2ck.com/issue1490 -->
            <!-- <field name="auto_refresh">100</field> -->
            <field name="domain" eval="[('latest', '=', True), ['OR', ('locked', '=', False), ('user', '=', Eval('context', {}).get('_user'))], ('to_state', '!=', None)]" pyson="1"/>
        </record>
        <record model="ir.action.act_window.domain" id="act_process_log_domain_mine">
            <field name="name">Mine</field>
            <field name="sequence" eval="10"/>
            <field name="domain" eval="[('user', '=', Eval('_user'))]" pyson="1"/>
            <field name="act_window" ref="act_process_log"/>
        </record>
        <record model="ir.action.act_window.domain" id="act_process_log_domain_all">
            <field name="name">All</field>
            <field name="sequence" eval="20"/>
            <field name="act_window" ref="act_process_log"/>
        </record>
        <record model="ir.action.act_window.view" id="act_process_log_view1">
            <field name="sequence" eval="30"/>
            <field name="view" ref="process_log_launchable_view_list"/>
            <field name="act_window" ref="act_process_log"/>
        </record>
        <record model="ir.action.act_window.view" id="act_process_log_view2">
            <field name="sequence" eval="40"/>
            <field name="view" ref="process_cog.process_log_form"/>
            <field name="act_window" ref="act_process_log"/>
        </record>
        <menuitem parent="menu_task" sequence="30" action="act_process_log" id="menu_launch_existing_tasks"/>
        <!-- ############################################################ -->
        <!-- Launch Task -->
        <!-- ############################################################ -->
        <record model="ir.action.wizard" id="act_launch_task_wizard">
            <field name="name">Launch Task</field>
            <field name="wiz_name">task.launch</field>
        </record>
        <record model="ir.action.keyword" id="act_launch_task_wizard_keyword">
            <field name="keyword">tree_open</field>
            <field name="model">process.log,-1</field>
            <field name="action" ref="act_launch_task_wizard"/>
        </record>
        <!-- ############################################################ -->
        <!-- Right -->
        <!-- ############################################################ -->
        <record model="res.group" id="team_management_admin">
            <field name="name">Team Management</field>
        </record>
        <record model="res.user-res.group" id="user_admin_team_management_admin">
            <field name="user" ref="res.user_admin"/>
            <field name="group" ref="team_management_admin"/>
        </record>
        <record model="ir.ui.menu-res.group" id="group_team_management_admin_menu_team">
            <field name="group" ref="team_management_admin"/>
            <field name="menu" ref="menu_team"/>
        </record>
        <record model="ir.ui.menu-res.group" id="group_team_management_admin_menu_team_management">
            <field name="group" ref="team_management_admin"/>
            <field name="menu" ref="menu_management_team"/>
        </record>
    </data>
</tryton>
