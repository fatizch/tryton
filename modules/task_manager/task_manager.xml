<?xml version="1.0" encoding="utf-8"?>
<tryton>
  <data>
    <!-- ############################################################ -->
    <!-- Menu Entries -->
    <!-- ############################################################ -->
    <menuitem name="Task Manager" id="menu_task" sequence="-1"/>
    <!-- ############################################################ -->
    <!-- User -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="task_user_view_form">
      <field name="model">res.user</field>
      <field name="type">form</field>
      <field name="inherit" ref="res.user_view_form_preferences"/>
      <field name="name">task_user_form</field>
    </record>
    <!-- ############################################################ -->
    <!-- Priority -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="priority_view_form">
      <field name="model">res.team.priority</field>
      <field name="type">form</field>
      <field name="name">priority_form</field>
    </record>
    <record model="ir.ui.view" id="priority_view_list">
      <field name="model">res.team.priority</field>
      <field name="type">tree</field>
      <field name="name">priority_list</field>
    </record>
    <!-- ############################################################ -->
    <!-- Team -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="team_view_form">
      <field name="model">res.team</field>
      <field name="type">form</field>
      <field name="name">team_form</field>
    </record>
    <record model="ir.ui.view" id="team_view_list">
      <field name="model">res.team</field>
      <field name="type">tree</field>
      <field name="name">team_list</field>
    </record>
    <!-- Entry Points -->
    <record model="ir.action.act_window" id="act_team">
      <field name="name">Team</field>
      <field name="res_model">res.team</field>
    </record>
    <record model="ir.action.act_window.view" id="act_team_view1">
      <field name="sequence" eval="16"/>
      <field name="view" ref="team_view_list"/>
      <field name="act_window" ref="act_team"/>
    </record>
    <record model="ir.action.act_window.view" id="act_team_view2">
      <field name="sequence" eval="16"/>
      <field name="view" ref="team_view_form"/>
      <field name="act_window" ref="act_team"/>
    </record>
    <menuitem parent="menu_task" sequence="100" action="act_team" id="menu_team"/>
    <!-- ############################################################ -->
    <!-- Select User -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="select_user_view_form">
      <field name="model">res.team.add_user.select</field>
      <field name="type">form</field>
      <field name="name">task_team_add_user_select_form</field>
    </record>
    <!-- ############################################################ -->
    <!-- Add User Wizard -->
    <!-- ############################################################ -->
    <record model="ir.action.wizard" id="wizard_add_user">
      <field name="name">Add Team User</field>
      <field name="wiz_name">res.team.add_user</field>
      <field name="model">res.team</field>
    </record>
    <!-- ############################################################ -->
    <!-- Task Dispatcher -->
    <!-- ############################################################ -->
    <record model="ir.action.wizard" id="act_task_dispatcher">
      <field name="name">New Task</field>
      <field name="wiz_name">task.select</field>
    </record>
    <menuitem parent="menu_task" sequence="100" action="act_task_dispatcher" id="menu_task_dispatcher"/>
    <!-- ############################################################ -->
    <!-- Task Selector -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="task_selector_view_form">
      <field name="model">task.select.available_tasks</field>
      <field name="type">form</field>
      <field name="name">task_select_available_tasks_form</field>
    </record>
    <!-- ############################################################ -->
    <!-- Task Displayer -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="available_task_view_list">
      <field name="model">task.select.available_tasks.task</field>
      <field name="type">tree</field>
      <field name="name">available_task_list</field>
    </record>
    <record model="ir.ui.view" id="task_displayer_view_graph">
      <field name="model">task.select.available_tasks.task</field>
      <field name="type">graph</field>
      <field name="name">task_select_available_tasks_task_graph</field>
    </record>
    <!-- ############################################################ -->
    <!-- Process Log -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="process_log_priority_view_list">
      <field name="model">process.log</field>
      <field name="type">tree</field>
      <field name="name">process_log_priority_list</field>
    </record>
    <record model="ir.ui.view" id="process_log_launchable_view_list">
      <field name="model">process.log</field>
      <field name="type">tree</field>
      <field name="name">process_log_launchable_list</field>
    </record>
    <!-- Entry Point -->
    <record model="ir.action.act_window" id="act_process_log">
      <field name="name">Waiting Tasks</field>
      <field name="res_model">process.log</field>
      <field name="auto_refresh">100</field>
      <field name="domain">[('latest', '=', True), ['OR', ('locked', '=', False), ('user', '=', Eval('context', {}).get('_user'))], ('to_state', '!=', None)]</field>
    </record>
    <record model="ir.action.act_window.view" id="act_process_log_view1">
      <field name="sequence" eval="10"/>
      <field name="view" ref="process_log_launchable_view_list"/>
      <field name="act_window" ref="act_process_log"/>
    </record>
    <record model="ir.action.act_window.view" id="act_process_log_view2">
      <field name="sequence" eval="11"/>
      <field name="view" ref="process_cog.process_log_form"/>
      <field name="act_window" ref="act_process_log"/>
    </record>
    <menuitem parent="menu_task" sequence="30" action="act_process_log" id="menu_launch_existing_tasks"/>
    <!-- ############################################################ -->
    <!-- Launch Task -->
    <!-- ############################################################ -->
    <record model="ir.action.wizard" id="act_launch_task_wizard">
      <field name="name">Launch Task</field>
      <field name="wiz_name">task.launch</field>
    </record>
    <record model="ir.action.keyword" id="act_launch_task_wizard_keyword">
      <field name="keyword">tree_open</field>
      <field name="model">process.log,-1</field>
      <field name="action" ref="act_launch_task_wizard"/>
    </record>
  </data>
</tryton>
