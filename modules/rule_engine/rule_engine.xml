<?xml version="1.0" encoding="UTF-8"?>
<!-- This file is part of Coog. The COPYRIGHT file at the top level of
this repository contains the full copyright notices and license terms. -->
<tryton>
    <data>
        <!-- ############################################################ -->
        <!-- Menu -->
        <!-- ############################################################ -->
        <menuitem name="Rule Engine" id="menu_rule_engine" icon="coding"/>
        <!-- ############################################################ -->
        <!-- Rule Execution Log -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="execution_log_view_form">
            <field name="model">rule_engine.log</field>
            <field name="type">form</field>
            <field name="name">execution_log_form</field>
        </record>
        <record model="ir.ui.view" id="execution_log_view_list">
            <field name="model">rule_engine.log</field>
            <field name="type">tree</field>
            <field name="name">execution_log_list</field>
        </record>
        <!-- ############################################################ -->
        <!-- Rule -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="rule_view_form">
            <field name="model">rule_engine</field>
            <field name="type">form</field>
            <field name="name">rule_engine_form</field>
        </record>
        <record model="ir.ui.view" id="rule_tree">
            <field name="model">rule_engine</field>
            <field name="type">tree</field>
            <field name="name">rule_engine_tree</field>
        </record>
        <record model="ir.action.act_window" id="rule_window">
            <field name="name">Rules</field>
            <field name="res_model">rule_engine</field>
        </record>
        <record model="ir.action.act_window.view" id="rule_tree_view">
            <field name="sequence" eval="10"/>
            <field name="view" ref="rule_tree"/>
            <field name="act_window" ref="rule_window"/>
        </record>
        <record model="ir.action.act_window.view" id="rule_form_view">
            <field name="sequence" eval="20"/>
            <field name="view" ref="rule_view_form"/>
            <field name="act_window" ref="rule_window"/>
        </record>
        <menuitem parent="menu_rule_engine" action="rule_window" id="menu_rule" icon="coding"/>
        <!-- ############################################################ -->
        <!-- Rule Parameters -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="parameter_form">
            <field name="model">rule_engine.rule_parameter</field>
            <field name="type">form</field>
            <field name="name">parameter_form</field>
        </record>
        <record model="ir.ui.view" id="parameter_tree">
            <field name="model">rule_engine.rule_parameter</field>
            <field name="type">tree</field>
            <field name="name">parameter_tree</field>
        </record>
        <!-- ############################################################ -->
        <!-- Test Case Values -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="test_case_value_form">
            <field name="model">rule_engine.test_case.value</field>
            <field name="type">form</field>
            <field name="name">test_case_value_form</field>
        </record>
        <record model="ir.ui.view" id="test_case_value_tree">
            <field name="model">rule_engine.test_case.value</field>
            <field name="type">tree</field>
            <field name="name">test_case_value_tree</field>
        </record>
        <!-- ############################################################ -->
        <!-- Test Cases -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="test_case_form">
            <field name="model">rule_engine.test_case</field>
            <field name="type">form</field>
            <field name="name">test_case_form</field>
        </record>
        <record model="ir.ui.view" id="test_case_tree">
            <field name="model">rule_engine.test_case</field>
            <field name="type">tree</field>
            <field name="name">test_case_tree</field>
        </record>
        <record model="ir.action.act_window" id="test_case_window_relate">
            <field name="name">Test Cases</field>
            <field name="res_model">rule_engine.test_case</field>
            <field name="domain" eval="[('rule', '=', Eval('active_id'))]" pyson="1"/>
        </record>
        <record model="ir.action.act_window.view" id="test_case_tree_view">
            <field name="sequence" eval="10"/>
            <field name="view" ref="test_case_tree"/>
            <field name="act_window" ref="test_case_window_relate"/>
        </record>
        <record model="ir.action.act_window.view" id="test_case_form_view">
            <field name="sequence" eval="20"/>
            <field name="view" ref="test_case_form"/>
            <field name="act_window" ref="test_case_window_relate"/>
        </record>
        <record model="ir.action.keyword" id="test_case_relate">
            <field name="keyword">form_relate</field>
            <field name="model">rule_engine,-1</field>
            <field name="action" ref="test_case_window_relate"/>
        </record>
        <record model="ir.model.button" id="button_rule_engine_test_case_recalculate">
            <field name="name">recalculate</field>
            <field name="model" search="[('model', '=', 'rule_engine.test_case')]"/>
        </record>
        <!-- ##################################### -->
        <!-- # Init Test Case From Execution Log # -->
        <!-- ##################################### -->
        <record model="ir.action.wizard" id="act_test_case_init">
            <field name="name">Create Test Case</field>
            <field name="wiz_name">rule_engine.test_case.init</field>
        </record>
        <record model="ir.action.keyword" id="act_test_case_init_keyword">
            <field name="keyword">form_action</field>
            <field name="model">rule_engine.log,-1</field>
            <field name="action" ref="act_test_case_init"/>
        </record>
        <!-- ############################################################ -->
        <!-- Context -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="context_form">
            <field name="model">rule_engine.context</field>
            <field name="type">form</field>
            <field name="name">context_form</field>
        </record>
        <record model="ir.ui.view" id="context_tree">
            <field name="model">rule_engine.context</field>
            <field name="type">tree</field>
            <field name="name">context_tree</field>
        </record>
        <record model="ir.action.act_window" id="context_window">
            <field name="name">Contexts</field>
            <field name="res_model">rule_engine.context</field>
        </record>
        <record model="ir.action.act_window.view" id="context_tree_view">
            <field name="sequence" eval="10"/>
            <field name="view" ref="context_tree"/>
            <field name="act_window" ref="context_window"/>
        </record>
        <record model="ir.action.act_window.view" id="context_form_view">
            <field name="sequence" eval="20"/>
            <field name="view" ref="context_form"/>
            <field name="act_window" ref="context_window"/>
        </record>
        <menuitem parent="menu_rule_engine" action="context_window" id="menu_context"/>
        <!-- ############################################################ -->
        <!-- Rule Functions -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="function_form">
            <field name="model">rule_engine.function</field>
            <field name="type">form</field>
            <field name="name">function_form</field>
        </record>
        <record model="ir.ui.view" id="function_tree">
            <field name="model">rule_engine.function</field>
            <field name="type">tree</field>
            <field name="field_childs">children</field>
            <field name="name">function_tree</field>
        </record>
        <record model="ir.action.act_window" id="tree_element_window">
            <field name="name">Rule Functions</field>
            <field name="res_model">rule_engine.function</field>
        </record>
        <record model="ir.action.act_window.view" id="tree_element_tree_view">
            <field name="sequence" eval="10"/>
            <field name="view" ref="function_tree"/>
            <field name="act_window" ref="tree_element_window"/>
        </record>
        <record model="ir.action.act_window.view" id="tree_element_form_view">
            <field name="sequence" eval="20"/>
            <field name="view" ref="function_form"/>
            <field name="act_window" ref="tree_element_window"/>
        </record>
        <menuitem parent="menu_rule_engine" action="tree_element_window" id="menu_tree_element" icon="function"/>
        <!-- Used by -->
        <record model="ir.action.act_window" id="act_rule_function_used_rule_form">
            <field name="name">Used in</field>
            <field name="res_model">rule_engine</field>
            <field name="domain" eval="[('functions_used', '=', Eval('active_id'))]" pyson="1"/>
        </record>
        <record model="ir.action.keyword" id="rule_functions_usage_keyword">
            <field name="keyword">form_relate</field>
            <field name="model">rule_engine.function,-1</field>
            <field name="action" ref="act_rule_function_used_rule_form"/>
        </record>
        <!-- ############################################################ -->
        <!-- Run Tests Wizard -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="rule_engine_run_tests_results_form">
            <field name="model">rule_engine.run_tests.results</field>
            <field name="type">form</field>
            <field name="name">rule_engine_run_tests_results_form</field>
        </record>
        <record model="ir.action.wizard" id="run_tests_wizard">
            <field name="name">Run Tests</field>
            <field name="wiz_name">rule_engine.run_tests</field>
            <field name="model">rule_engine</field>
        </record>
        <record model="ir.action.keyword" id="run_tests_keyword">
            <field name="keyword">form_action</field>
            <field name="model">rule_engine,-1</field>
            <field name="action" ref="run_tests_wizard"/>
        </record>
        <record model="ir.action.act_window" id="act_create_test_case">
            <field name="name">New test case</field>
            <field name="res_model">rule_engine.test_case</field>
        </record>
        <record model="ir.action.act_window.view" id="act_create_test_case_view_form">
            <field name="sequence" eval="20"/>
            <field name="view" ref="test_case_form"/>
            <field name="act_window" ref="act_create_test_case"/>
        </record>
        <!-- ############################################################ -->
        <!-- Table Menu -->
        <!-- ############################################################ -->
        <menuitem action="table.act_table_definition_form" sequence="50" id="table.menu_table_defintion_form" parent="menu_rule_engine" icon="table"/>
        <!-- ############################################################ -->
        <!-- Rule Errors -->
        <!-- ############################################################ -->
        <record model="ir.ui.view" id="error_form">
            <field name="model">functional_error</field>
            <field name="type">form</field>
            <field name="name">error_form</field>
        </record>
        <record model="ir.ui.view" id="error_tree">
            <field name="model">functional_error</field>
            <field name="type">tree</field>
            <field name="name">error_tree</field>
        </record>
        <record model="ir.action.act_window" id="error_window">
            <field name="name">Rule Errors</field>
            <field name="res_model">functional_error</field>
        </record>
        <record model="ir.action.act_window.view" id="error_tree_view">
            <field name="sequence" eval="10"/>
            <field name="view" ref="error_tree"/>
            <field name="act_window" ref="error_window"/>
        </record>
        <record model="ir.action.act_window.view" id="error_form_view">
            <field name="sequence" eval="20"/>
            <field name="view" ref="error_form"/>
            <field name="act_window" ref="error_window"/>
        </record>
        <menuitem parent="menu_rule_engine" action="error_window" id="menu_error"/>
        <!-- ############################ -->
        <!-- # Validate Rule Test Cases # -->
        <!-- ############################ -->
        <record model="ir.action.wizard" id="act_validate_test_cases">
            <field name="name">Validate Rules</field>
            <field name="wiz_name">rule_engine.validate_test_cases</field>
        </record>
        <record model="ir.action.keyword" id="act_validate_test_cases_keyword">
            <field name="keyword">form_action</field>
            <field name="model">rule_engine,-1</field>
            <field name="action" ref="act_validate_test_cases"/>
        </record>
        <!-- ################### -->
        <!-- # Default Context # -->
        <!-- ################### -->
        <record model="rule_engine.context" id="default_context">
            <field name="name">Context par d√©faut</field>
        </record>
        <record model="rule_engine.context" id="default_context_en">
            <field name="name">Default Context</field>
        </record>
        <record model="ir.action.act_window" id="act_rule_engine_log_relate_form">
            <field name="name">Rule Engine Logs</field>
            <field name="res_model">rule_engine.log</field>
            <field name="domain" eval="[('rule', '=', Eval('active_id'))]" pyson="1"/>
        </record>
        <record model="ir.action.keyword" id="act_rule_engine_log_relate_keyword">
            <field name="keyword">form_relate</field>
            <field name="model">rule_engine,-1</field>
            <field name="action" ref="act_rule_engine_log_relate_form"/>
        </record>
    </data>
</tryton>
