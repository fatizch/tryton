<?xml version="1.0" encoding="UTF-8"?>
<tryton>
  <data>
    <!--################################################################ -->
    <!-- Status History -->
    <!--################################################################ -->
    <record model="ir.ui.view" id="status_history_view_form">
      <field name="model">contract.status.history</field>
      <field name="type">form</field>
      <field name="name">status_history_form</field>
    </record>
    <record model="ir.ui.view" id="status_history_view_tree">
      <field name="model">contract.status.history</field>
      <field name="type">tree</field>
      <field name="name">status_history_tree</field>
    </record>
    <!--################################################################ -->
    <!-- Contract Screens -->
    <!--################################################################ -->
    <record model="ir.ui.view" id="contract_view_tree">
      <field name="model">contract</field>
      <field name="type">tree</field>
      <field name="name">contract_tree</field>
    </record>
    <record model="ir.ui.view" id="contract_view_form">
      <field name="model">contract</field>
      <field name="type">form</field>
      <field name="name">contract_form</field>
    </record>
    <!-- Read / Write rule -->
    <record model="ir.rule.group" id="rule_group_contract">
      <field name="model" search="[('model', '=', 'contract')]"/>
      <field name="global_p" eval="True"/>
    </record>
    <record model="ir.rule" id="rule_contract_1">
      <field name="domain">[('company', 'in', [c.id for c in user.companies])]</field>
      <field name="rule_group" ref="rule_group_contract"/>
    </record>
    <!-- ############################################################ -->
    <!-- ########### Contract ########### -->
    <!-- ############################################################ -->
    <record model="ir.action.act_window" id="act_contract_form">
      <field name="name">Contracts</field>
      <field name="res_model">contract</field>
      <field name="domain">[('company', '=', Eval('context', {}).get('company', -1)), ('status', '!=', 'quote')]</field>
    </record>
    <record model="ir.action.act_window.view" id="act_contract_form_view1">
      <field name="sequence" eval="10"/>
      <field name="view" ref="contract_view_tree"/>
      <field name="act_window" ref="act_contract_form"/>
    </record>
    <record model="ir.action.act_window.view" id="act_contract_form_view2">
      <field name="sequence" eval="20"/>
      <field name="view" ref="contract_view_form"/>
      <field name="act_window" ref="act_contract_form"/>
    </record>
    <!-- ############################################################ -->
    <!-- ########### Quote ########### -->
    <!-- ############################################################ -->
    <record model="ir.ui.view" id="quote_view_tree">
      <field name="model">contract</field>
      <field name="type">tree</field>
      <field name="name">quote_tree</field>
    </record>
    <record model="ir.action.act_window" id="act_quote_form">
      <field name="name">Quotes</field>
      <field name="res_model">contract</field>
      <field name="domain">[('company', '=', Eval('context', {}).get('company', False)), ('status', '=', 'quote')]</field>
    </record>
    <record model="ir.action.act_window.view" id="act_quote_form_view1">
      <field name="sequence" eval="10"/>
      <field name="view" ref="quote_view_tree"/>
      <field name="act_window" ref="act_quote_form"/>
    </record>
    <record model="ir.action.act_window.view" id="act_quote_form_view2">
      <field name="sequence" eval="20"/>
      <field name="view" ref="contract_view_form"/>
      <field name="act_window" ref="act_quote_form"/>
    </record>
    <!-- ############################################################ -->
    <!-- ########### Menu ########### -->
    <!-- ############################################################ -->
    <menuitem name="Contract" id="menu_contract" sequence="10" icon="contract"/>
    <menuitem parent="menu_contract" sequence="10" id="menu_quote_form" icon="quote" action="act_quote_form"/>
    <menuitem parent="menu_contract" sequence="20" id="menu_contract_form" icon="contract" action="act_contract_form"/>
    <menuitem name="Batch" parent="menu_contract" sequence="99" id="menu_contract_batch" icon="batch"/>
    <!--################################################################ -->
    <!-- Options Screens -->
    <!--################################################################ -->
    <record model="ir.ui.view" id="option_view_tree">
      <field name="model">contract.option</field>
      <field name="type">tree</field>
      <field name="name">option-commission_option_list</field>
    </record>
    <record model="ir.ui.view" id="option_view_form">
      <field name="model">contract.option</field>
      <field name="type">form</field>
      <field name="name">option-commission_option_form</field>
    </record>
    <!--################################################################ -->
    <!-- Contract Address -->
    <!--################################################################ -->
    <record model="ir.ui.view" id="contract_address_view_tree">
      <field name="model">contract.address</field>
      <field name="type">tree</field>
      <field name="name">contract_address_tree</field>
    </record>
    <record model="ir.ui.view" id="contract_address_view_form">
      <field name="model">contract.address</field>
      <field name="type">form</field>
      <field name="name">contract_address_form</field>
    </record>
    <!-- ############################################################ -->
    <!-- ########### Rights ########### -->
    <!-- ############################################################ -->
    <record model="res.group" id="group_contract">
        <field name="name">Contract</field>
    </record>
    <record model="res.group" id="group_contract_admin">
        <field name="name">Contract Administration</field>
    </record>
    <record model="res.user-res.group" id="user_admin_group_contract">
        <field name="user" ref="res.user_admin"/>
        <field name="group" ref="group_contract"/>
    </record>
    <record model="res.user-res.group" id="user_admin_group_contract_admin">
        <field name="user" ref="res.user_admin"/>
        <field name="group" ref="group_contract_admin"/>
    </record>
    <record model="ir.ui.menu-res.group" id="group_contract_menu_contract">
       <field name="group" ref="group_contract"/>
       <field name="menu" ref="menu_contract"/>
    </record>
    <record model="ir.ui.menu-res.group" id="group_contract_admin_menu_contract">
       <field name="group" ref="group_contract_admin"/>
       <field name="menu" ref="menu_contract"/>
    </record>
  </data>
</tryton>
