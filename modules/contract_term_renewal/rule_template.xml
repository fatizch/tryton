<?xml version="1.0" encoding="utf-8"?>
<!-- This file is part of Coog. The COPYRIGHT file at the top level of
this repository contains the full copyright notices and license terms. -->
<tryton>
    <data>
        <!-- ########################################## -->
        <!-- # Renewal in sync with subscription date # -->
        <!-- ########################################## -->
        <record model="rule_engine" id="product_term_renewal_sync_sub_date">
            <field name="name">Product Term Renewal In Sync With Subscription Date</field>
            <field name="short_name">product_term_renewal_sync_sub_date</field>
            <field name="algorithm">start_date = date_de_calcul()
return start_date + relativedelta(years=1, days=-1)</field>
            <field name="status">validated</field>
            <field name="type_">renewal</field>
            <field name="context" ref="rule_engine.default_context"/>
        </record>
        <!-- ################################### -->
        <!-- # Renewal in sync with given date # -->
        <!-- ################################### -->
        <record model="rule_engine" id="product_term_renewal_sync_given_date">
            <field name="name">Product Term Renewal In Sync With Given Date</field>
            <field name="short_name">product_term_renewal_sync_given_date</field>
            <field name="algorithm">start_date = date_de_calcul()
given_day_in_current_year = datetime.date(
    start_date.timetuple()[0], int(param_given_month()), int(param_given_day()))
if given_day_in_current_year > start_date:
    return given_day_in_current_year + relativedelta(days=-1)
else:
    return given_day_in_current_year + relativedelta(years=1, days=-1)</field>
            <field name="status">validated</field>
            <field name="type_">renewal</field>
            <field name="context" ref="rule_engine.default_context"/>
        </record>
        <record model="rule_engine.rule_parameter" id="given_day">
            <field name="name">given_day</field>
            <field name="type_">selection</field>
            <field name="selection">1 : 1
2 : 2
3 : 3
4 : 4
5 : 5
6 : 6
7 : 7
8 : 8
9 : 9
10 : 10
11 : 11
12 : 12
13 : 13
14 : 14
15 : 15
16 : 16
17 : 17
18 : 18
19 : 19
20 : 20
21 : 21
22 : 22
23 : 23
24 : 24
25 : 25
26 : 26
27 : 27
28 : 28
29 : 29
30 : 30
31 : 31</field>
            <field name="selection_sorted">False</field>
            <field name="string">Given Day</field>
            <field name="parent_rule" ref="product_term_renewal_sync_given_date"/>
        </record>
        <record model="rule_engine.rule_parameter" id="given_month">
            <field name="name">given_month</field>
            <field name="type_">selection</field>
            <field name="selection">1 : 1
2 : 2
3 : 3
4 : 4
5 : 5
6 : 6
7 : 7
8 : 8
9 : 9
10 : 10
11 : 11
12 : 12</field>
            <field name="selection_sorted">False</field>
            <field name="string">Given Month</field>
            <field name="parent_rule" ref="product_term_renewal_sync_given_date"/>
        </record>
    </data>
</tryton>
