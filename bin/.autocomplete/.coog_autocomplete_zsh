 #!/user/bin env zsh
 
 coog_autocomplete_update_zsh() { # Set up tab completion for zsh
         _completion_list() { # zsh Completion List
                 local cur=${COMP_WORDS[COMP_CWORD]}
                 local completion=""
                 local command_path=`which coog`
                 local script_path=`readlink -f $command_path`
                 local script_dir=`dirname $script_path`
                 _wd=`pwd`
                 cd $script_dir
                 case "$COMP_CWORD" in
                 1)
                         for fn in ./coog-*; do
                                 completion="$completion \
                                 `(echo $fn | cut -d'-' -f 2)`"
                         done
                         ;;
                 2)
                         local prev=${COMP_WORDS[COMP_CWORD-1]}
                         if [ $prev = 'help' ] ; then
                                 for fn in ./coog-*; do
                                         completion="$completion \
                                         `(echo $fn | cut -d'-' -f 2)`"
                                 done
                         fi
                         ;;
                 esac
                 COMPREPLY=( $(compgen -W "$completion" -- $cur) )
                 cd $_wd
         }
         complete -F _completion_list coog
 }
 
 if [ -n "$ZSH_VERSION" ] ; then
         autoload bashcompinit
         bashcompinit
 fi
 coog_autocomplete_update_zsh