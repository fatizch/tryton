# vim: set ft=sh:
# dependancies management


_coog_dep_proxy_opt() {
        [ ! -z $http_proxy ] && echo "--proxy $http_proxy" && return
        [ ! -z $https_proxy ] && echo "--proxy $https_proxy" && return
}

coog_dep_base() { # install base deps
        local proxy_opt
	proxy_opt=`_coog_dep_proxy_opt`
        pip install $proxy_opt pyflakes==0.5.0  # check rules syntax (client and server)
        pip install $proxy_opt dateutils
        pip install $proxy_opt lxml
        pip install $proxy_opt python-sql
        pip install $proxy_opt psycopg2
        pip install $proxy_opt polib
        pip install $proxy_opt genshi==0.6
        pip install $proxy_opt relatorio
        pip install $proxy_opt pydot
        pip install $proxy_opt pyparsing==1.5.7
        pip install $proxy_opt pywebdav
        pip install $proxy_opt python-stdnum
        pip install $proxy_opt Mock
        pip install $proxy_opt simpleeval
        pip install $proxy_opt unidecode
        pip install $proxy_opt argcomplete
}

coog_dep_extra() { # install extra deps (interfaces, deployment extras)
        local proxy_opt
	proxy_opt=`_coog_dep_proxy_opt`
        pip install $proxy_opt python-ldap                  # ldap
        pip install $proxy_opt vobject                      # vcalendar
        pip install $proxy_opt raven                        # sentry
        pip install $proxy_opt redis                        # multi-worker
        pip install $proxy_opt hiredis                      # multi-worker
        pip install $proxy_opt msgpack-python               # multi-worker
        pip install $proxy_opt --no-deps celery-tryton      # batch
        pip install $proxy_opt celery                       # batch
        pip install $proxy_opt flower                       # batch
        pip install $proxy_opt sphinx                       # doc
        pip install $proxy_opt sphinxcontrib-inheritance    # doc
        pip install $proxy_opt pytest
}

coog_dep_main() { # install all deps
        coog_dep_base
        coog_dep_extra
}
